var gbl=gbl||{};if(!gbl.ns){gbl.ns={}}if(!gbl.ns.register){gbl.ns.register=function(c){var h=window;if(c&&c.length>0){var e=c.split(".");var a=e[0];if(!h[a]){h[a]={}}var f=h[a];for(var b=1;b<e.length;b++){var d=e[b];if(!f[d]){f[d]={}}f=f[d]}}}}gbl.ns.register("g.controls");g.controls.tooltip=function(){var n="click.gTooltip";var q="mouseleave.gTooltip";var p="mouseenter.gTooltip";var r="resize.gTooltip";var o="focus.gTooltip";var m="blur.gTooltip";var d="g-tt-close";var h="g-tt-open";var f="g-tooltip-focus";var e="g-tooltip-content-focus";var b="g-tt-arrow-l";var c="g-tt-arrow-l-input";var H=".g-tooltip-hover";var C=".g-tooltip-click";var G="."+f;var E="."+e;var F=".g-tooltip-content-hover";var D=".g-tooltip-content-click";var B=".g-tooltip";var I=".g-tooltip-info-hover";var J=".g-tooltip-info";var a="data-feName";var L=false;var x="g_tooltip_{{keyname}}";var z="g_tooltip_{{keyname}}";var w='<div id="'+x+'" class="g-tooltip"><div>{{html}}</div><div class="{{arrowclass}}"></div><span class="'+d+'">X</span></div>';var y='<div id="'+z+'" class="g-tooltip-info"><div class="g-tt-info-arrow-d"></div><div>{{html}}</div><span class="'+d+'">X</span></div>';var N;var l;var O=this;var M;var k={};k.info="info";k.quickhelp="quickhelp";k.content="content";this.init=function(Q,P){N=Q;if(typeof(P)!=="undefined"&&P.length>0){l=P}else{l=$("body")}l.off(p,H).on(p,H,function(){$(B).hide();L=false;t($(this),false)}).off(q,H).on(q,H,function(){i(s(this))});l.off(n,C).on(n,C,function(){$(B).hide();t($(this),true)});l.off(n,I).on(p,I,function(){t($(this),false,k.info)}).on(q,I,function(){$(J).hide()});l.off(o,G).on(o,G,function(){$(B).hide();L=false;t($(this),false)}).off(m,G).on(m,G,function(){$(B).hide();L=true});l.off(p,F).on(p,F,function(){$(B).hide();L=false;t($(this),false,k.content)}).off(q,F).on(q,F,function(){i(s(this))});l.off(n,D).on(n,D,function(){$(B).hide();t($(this),true,k.content)});l.off(o,E).on(o,E,function(){$(B).hide();L=false;t($(this),false,k.content)}).off(m,E).on(m,E,function(){$(B).hide();L=true});$(window).unbind(r).bind(r,function(){$(B).hide()})};this.closeAll=function(){$(B).hide()};this.positions={};this.positions.middlebottom="mb";this.positions.middleleft="ml";this.positions.topright="tr";this.positionElement=function(Q,V,U,P){var T=Q.outerWidth();var R=T/2;var S=Q.position();if(U===O.positions.middlebottom){var W=5;if(P){W=W+parseInt(Q.css("margin-bottom"))}var Y=S.top+Q.outerHeight()+W+10;var X=S.left-(V.outerWidth()/2)+R;V.css({top:Y+"px",left:X+"px"})}};var s=function(P){return $(P).attr("id")};var t=function(R,P,W){R.addClass(h);var Q=R.attr("data-keyname");var V;var S=W==k.info;if(S){V=z.replace("{{keyname}}",Q)}else{V=x.replace("{{keyname}}",Q)}var U=$("#"+V);if(U.length<=0){var T;if(S){T=y}else{T=w}if(W!=k.content){v(R,V,P,W,Q,T)}else{u(R,V,P,W,Q,T)}}else{K(R,U,P,W)}};var v=function(R,T,P,U,Q,S){$.ajax({url:N,type:"POST",dataType:"json",data:{keyname:Q},success:function(V){if(typeof(V)!=="undefined"){var W=S.replace("{{keyname}}",V.Key).replace("{{html}}",V.Value);if(A(R)){W=W.replace("{{arrowclass}}",c)}else{W=W.replace("{{arrowclass}}",b)}$("body").append(W);K(R,T,P,U)}},error:function(X,V,W){alert(W)}})};var u=function(R,V,P,W,Q,U){var S=$("#"+Q);if(S.length>0){var T;if(A(R)){T=U.replace("{{arrowclass}}",c)}else{T=U.replace("{{arrowclass}}",b)}T=$(T.replace("{{keyname}}",Q).replace("{{html}}",""));T.css("max-width","1000px");S.wrap(T);$("#"+V).remove().appendTo("body");S.show();K(R,V,P,W)}};var K=function(W,Y,Q,Z){if(L==false){var V=W.outerWidth();var S=V/2;var U=W.outerHeight()/2;var T=W.offset();var X=Y;if(typeof(Y)==="string"){X=$("#"+Y)}var ab;var aa;if(Z==k.info){ab=T.top-X.outerHeight(true)-10;aa=T.left-(X.outerWidth(true)/2)+S}else{ab=T.top;if(A(W)){aa=T.left+V+6}else{aa=T.left+V+12}}X.css({top:ab+"px",left:aa+"px"});var P=W.attr("id");if(typeof(P)==="undefined"){P="g_tt_id_"+$.guid++;W.attr("id",P)}X.attr(a,P);X.off(p).on(p,function(){var ac=$(this).attr(a);$("#"+ac).addClass(h)}).off(q).on(q,function(){i($(this).attr(a))});X.show();var R=X.find("."+d);R.unbind(n);if(Q){R.show();R.bind(n,function(){$(this).parent().hide()})}else{R.hide()}}else{$(B).hide();L=false;W.removeClass(h)}};var i=function(Q){var R=typeof(Q);if(R!=="undefined"){var P=$("#"+Q);P.removeClass(h);setTimeout(function(){j(P)},200)}};var j=function(Q){var P=Q;var R=P.hasClass(f)||P.hasClass(e);if(!R&&!P.hasClass(h)){L=true;$(B).hide()}};var A=function(Q){var R=false;try{R=Q.hasClass(e)||Q.hasClass(f)}catch(P){}return R}};